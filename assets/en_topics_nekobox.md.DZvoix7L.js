import{_ as r,a as l,b as p,c as d,d as u,e as h,f as c,g,h as m,i as f,j as b,k as w,l as y,m as k,n as v,o as x,p as N,q as S,r as I,s as D,t as _,u as T,v as P}from"./chunks/EX-11.BXax8aut.js";import{_ as q}from"./chunks/EX-6.I-8DGH--.js";import{_ as C,C as A,c as R,o as V,ap as a,j as t,a as o,G as s,w as i}from"./chunks/framework.DTbE5L7F.js";const X=JSON.parse('{"title":"NekoBox for Android","description":"Important notes before using NekoBox","frontmatter":{"layout":"doc","outline":"deep","title":"NekoBox for Android","description":"Important notes before using NekoBox","date":"2025-06-17T00:00:00.000Z","editLink":true,"head":[["meta",{"name":"keywords","content":"NekoBox, nekobox, NB4A, nekobox for Android, Exclave, Android, v2ray, singbox, clients, xray, clash meta"}]]},"headers":[],"relativePath":"en/topics/nekobox.md","filePath":"en/topics/nekobox.md"}'),B={name:"en/topics/nekobox.md"},E={class:"details custom-block"},L={class:"info custom-block"},U={class:"danger custom-block"},F={class:"details custom-block"},H={class:"tip custom-block"},G={class:"details custom-block"};function M(W,e,z,O,j,Y){const n=A("NolebaseInlineLinkPreview");return V(),R("div",null,[e[120]||(e[120]=a('<h1 id="nb4a" tabindex="-1">NB4A <a class="header-anchor" href="#nb4a" aria-label="Permalink to &quot;NB4A&quot;">â€‹</a></h1><p><strong>NekoBox for Android</strong></p><hr><h2 id="ðŸ“š-table-of-contents" tabindex="-1">ðŸ“š Table of Contents <a class="header-anchor" href="#ðŸ“š-table-of-contents" aria-label="Permalink to &quot;ðŸ“š Table of Contents&quot;">â€‹</a></h2><nav class="table-of-contents"><ul><li><a href="#ðŸ“š-table-of-contents">ðŸ“š Table of Contents</a></li><li><a href="#note-1-some-subscriptions-not-updating">Note 1 - Some Subscriptions Not Updating</a></li><li><a href="#assets">Note 2 - Outdated Route Asset Files</a></li><li><a href="#bypass">Allow apps to bypass VPN</a></li><li><a href="#import">How to Import a Backup File</a><ul><li><a href="#backup-sec">Different Parts of the Backup File</a></li></ul></li><li><a href="#update-sub">Update subscription links</a></li><li><a href="#remote">Remote DNS</a><ul><li><a href="#nekobox-exclave">NekoBox / Exclave</a></li><li><a href="#hiddify-v2ray">Hiddify / V2ray</a></li></ul></li><li><a href="#direct">Direct DNS / Local DNS</a></li><li><a href="#dns-routing">Enable DNS Routing</a><ul><li><a href="#fake-dns">Enable Fake DNS</a></li></ul></li><li><a href="#url-test">URL Connection Test</a></li><li><a href="#tun-implementation-stack">TUN Implementation / Stack</a><ul><li><a href="#tun-types">TUN Types</a></li><li><a href="#which-one-should-we-choose">Which one should we choose?</a></li><li><a href="#important-points-for-setting-tun-implementation">Important points for setting TUN Implementation</a></li></ul></li><li><a href="#summary">Summary of Recommendations</a><ul><li><a href="#in-nekobox-exclave">In NekoBox/Exclave</a></li><li><a href="#in-hiddify">In Hiddify</a></li><li><a href="#in-v2rayng-and-mahsang">In V2rayNG and MahsaNG</a></li></ul></li><li><a href="#download">Download Links</a></li></ul></nav><hr><br><h2 id="note-1-some-subscriptions-not-updating" tabindex="-1">Note 1 - Some Subscriptions Not Updating <a class="header-anchor" href="#note-1-some-subscriptions-not-updating" aria-label="Permalink to &quot;Note 1 - Some Subscriptions Not Updating&quot;">â€‹</a></h2>',8)),t("blockquote",null,[t("p",null,[e[1]||(e[1]=o("Regarding NekoBox ",-1)),s(n,{href:"https://github.com/MatsuriDayo/NekoBoxForAndroid/releases",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[0]||(e[0]=[o("version 1.4.0",-1)])]),_:1})])]),t("p",null,[e[4]||(e[4]=o("In the latest update, some subscription links are not being added to the client. In my own backup, there are about ten subscription links at the end that do not update, while they work fine in other clients. I still don't know the reason. If this is important to you, do not update to this version. I still recommend using ",-1)),s(n,{href:"https://t.me/new_folder_revil/3498",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[2]||(e[2]=[o("Exclave",-1)])]),_:1}),e[5]||(e[5]=o(". Its ",-1)),s(n,{href:"#balancer"},{default:i(()=>[...e[3]||(e[3]=[o("balancer",-1)])]),_:1}),e[6]||(e[6]=o(" feature is worth the entire NekoBox charade.",-1))]),t("details",E,[e[16]||(e[16]=t("summary",null,[t("strong",null,[t("code",null,"Some of the subscriptions that don't update")])],-1)),t("ul",null,[t("li",null,[t("p",null,[s(n,{href:"https://robin.victoriacross.ir",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[7]||(e[7]=[o("https://robin.victoriacross.ir",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://raw.githubusercontent.com/Rayan-Config/C-Sub/refs/heads/main/configs/proxy.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[8]||(e[8]=[o("https://raw.githubusercontent.com/Rayan-Config/C-Sub/refs/heads/main/configs/proxy.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://raw.githubusercontent.com/MatinGhanbari/v2ray-configs/refs/heads/main/subscriptions/base64/all_sub.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[9]||(e[9]=[o("https://raw.githubusercontent.com/MatinGhanbari/v2ray-configs/refs/heads/main/subscriptions/base64/all_sub.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://raw.githubusercontent.com/Kolandone/v2raycollector/refs/heads/main/ss.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[10]||(e[10]=[o("https://raw.githubusercontent.com/Kolandone/v2raycollector/refs/heads/main/ss.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://v2.alicivil.workers.dev/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[11]||(e[11]=[o("https://v2.alicivil.workers.dev/",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://raw.githubusercontent.com/4n0nymou3/multi-proxy-config-fetcher/refs/heads/main/configs/proxy_configs.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[12]||(e[12]=[o("https://raw.githubusercontent.com/4n0nymou3/multi-proxy-config-fetcher/refs/heads/main/configs/proxy_configs.txt",-1)])]),_:1})])])]),t("p",null,[e[14]||(e[14]=o("It's not a big deal when we have our own ",-1)),s(n,{href:"https://github.com/NiREvil/vless/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[13]||(e[13]=[o("repository of various subscription links",-1)])]),_:1}),e[15]||(e[15]=o(". If one doesn't work, we'll use another ðŸ¤§ ðŸ˜…",-1))])]),e[121]||(e[121]=a('<br><h2 id="assets" tabindex="-1">Note 2 - Outdated Route Asset Files <a class="header-anchor" href="#assets" aria-label="Permalink to &quot;Note 2 - Outdated Route Asset Files {#assets}&quot;">â€‹</a></h2><p>As always, the problems revolve around Routing Rules.</p><blockquote><p>If you don&#39;t care about ad-blocking rules and bypassing Iranian IPs and websites, don&#39;t read the rest of this article.</p></blockquote><p>I have disabled the rules in the Route section in both backup files because if the geosite and geoip files were not updated for someone, no config would connect. I disabled it by default, and if it&#39;s important for you to be able to visit Iranian websites with the VPN on, and you also want to block some website ads, then first go to the Route section like in this screenshot:</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+l+'" alt="Routing-Rules" width="640px"></p></details><p><strong>Then go here</strong></p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+p+'" alt="Routing-Rules2" width="640px"></p><br><p align="center"><img src="'+d+'" alt="Routing-Rules3" width="640px"></p></details><p>And here you have to click on Update and wait for both geo assets files to be updated. I also wrote in the image that after updating, the updated date should be written below them.</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+u+'" alt="Routing-Rules4" width="640px"></p></details><p>Now that these are updated, you can go back to the previous page and turn on any rule you want. I suggest turning them all on, all except the last one (Block Ads - Full). The last one is very heavy and overkill. If it&#39;s on, it will take one or two seconds to start connecting to any config.</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+h+'" alt="Routing-Rules5" width="640px"></p></details><h2 id="bypass" tabindex="-1">Allow apps to bypass VPN <a class="header-anchor" href="#bypass" aria-label="Permalink to &quot;Allow apps to bypass VPN {#bypass}&quot;">â€‹</a></h2><p>If you want to visit the MyIrancell app while the client is active, it won&#39;t open because you have to enter it with an Iranian IP. To avoid having to turn the client on and off every minute, it&#39;s better to add Iranian apps to the exceptions list. From where? From this path:</p><blockquote><p>Nekobox settings â†’ Apps VPN Mode â†’ Bypass</p></blockquote><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+c+'" alt="Apps-VPN-Mode" width="640px"></p><br><p align="center"><img src="'+g+'" alt="Apps-VPN-Mode2" width="640px"></p><br><p align="center"><img src="'+m+'" alt="Apps-VPN-Mode3" width="640px"></p></details><p>Enable MyIrancell, MyShatel, BarghMan, Shad, Rubika, Eitaa, and other domestic scoundrels so that their traffic no longer passes through the VPN tunnel. In the first part of this article, we bypassed Iranian websites and IPs to continue their activities outside the VPN tunnel, and now we have done the same for the applications installed on our phone. And that&#39;s all, folks ðŸ˜†</p><br><h2 id="import" tabindex="-1">How to Import a Backup File <a class="header-anchor" href="#import" aria-label="Permalink to &quot;How to Import a Backup File {#import}&quot;">â€‹</a></h2><p>First, download and save my backup file or anyone else&#39;s.</p>',20)),t("ul",null,[t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3497",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[17]||(e[17]=[o("NekoBox Backup File Link",-1)])]),_:1})]),t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3500",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[18]||(e[18]=[o("Exclave Backup File Link",-1)])]),_:1})])]),e[122]||(e[122]=a('<details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+f+'" alt="Apps-VPN-Mode4" width="640px"></p><br><p align="center"><img src="'+b+'" alt="Backup-Files" width="640px"></p><br><p align="center"><img src="'+w+'" alt="Backup-Files2" width="640px"></p><br><p align="center"><img src="'+y+'" alt="Backup-Files3" width="640px"></p></details><h3 id="backup-sec" tabindex="-1">Different Parts of the Backup File <a class="header-anchor" href="#backup-sec" aria-label="Permalink to &quot;Different Parts of the Backup File {#backup-sec}&quot;">â€‹</a></h3><p><strong>Backup files have three different parts:</strong></p><ol><li>Configs</li><li>Rules</li><li>Client Settings</li></ol><p>You can always safely check the rules and settings sections and import them into the client, but be careful that if you check the third section, i.e., the configs, they will replace your own configs, and everything you had in the client will be deleted. So it&#39;s better to first back up your own configs and settings from the same tools menu that I showed in the screenshot (with the Export option) before importing my backup. If you don&#39;t have any special configs or they are not important, then it&#39;s okay, ignore it and add any file you see, God bless.</p>',5)),t("p",null,[e[21]||(e[21]=o("If you didn't understand and need a video tutorial, you can find some old videos ",-1)),s(n,{href:"https://t.me/F_NiREvil/5123",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[19]||(e[19]=[o("here",-1)])]),_:1}),e[22]||(e[22]=o(" and one or two ",-1)),s(n,{href:"https://t.me/F_NiREvil/5518",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[20]||(e[20]=[o("here",-1)])]),_:1}),e[23]||(e[23]=o(".",-1))]),e[123]||(e[123]=a('<br><h2 id="update-sub" tabindex="-1">Update subscription links <a class="header-anchor" href="#update-sub" aria-label="Permalink to &quot;Update subscription links {#update-sub}&quot;">â€‹</a></h2><p>You&#39;ve been with Golabi VPN for a week, now you&#39;re back to NekoBox or Exclave or V2ray or whatever. If you use public subscription links, then the configs inside them are now dead. The first thing you should do is:</p><details class="details custom-block"><summary>View Screenshot</summary><p align="center"><img src="'+k+'" alt="Update-Test" width="640px"></p></details><p>First of all, you enter your desired group and select the option:</p><p>ðŸŸ  <code>Update current Groups subscription</code></p><p>and wait for it to update.</p><br><p>The second thing you should do is select the option:</p><p>ðŸŸ¡ <code>Remove Duplicate servers</code></p><br><p>so that duplicate configs are deleted and you don&#39;t waste time and internet data testing them. If you used my backup, then this option is not needed, it will remove duplicates itself when updating because I turned on the option from within the group itself.</p><p>The third thing you should do is press the option:</p><p>ðŸŸ¢ <code>URL Test</code></p><br><p>Be careful that before performing this test, whatever VPN is on must be turned off, otherwise the test results will not be correct.</p><p>And the last thing is to press the option:</p><p>ðŸ”´ <code>Order/By Delay</code></p><br><p>so that the configs are listed in order of their speed and ping. Pressing this option once is enough.</p><p>Now you can connect to one of the configs at the top of the list with a small green number next to it. Those with Timeout written next to them are gone.</p><h1 id="balancer" tabindex="-1">Exclave Load balance <a class="header-anchor" href="#balancer" aria-label="Permalink to &quot;Exclave Load balance {#balancer}&quot;">â€‹</a></h1><blockquote><p><strong>One of the best clients with Singbox core for Android</strong></p></blockquote><p>The most important reason I say it&#39;s better to use this instead of NekoBox is its <code>Balancer</code> feature.</p><p>If you have added one of the backup files that I put in the repository, you have definitely seen that on the first page there are some configs that are not normal and below them it says Balancer. What are these Balancer configs and how were they created?</p><p>For example, in NekoBox, if you have a subscription link with, say, a hundred configs in it, as usual, we take a URL Test and connect to the first or second config that has a better ping. If after a few minutes or hours it becomes weak or has interference or a false connection or stops working for any reason... then we have to go back into NekoBox and choose another one, a headache.</p><p>But here in the Exclave client, what do we do? From the top of the page, from the <code>+</code> icon, we open the <code>manual settings</code> menu and from the end of the list, we select the <code>load balance</code> config, like in this screenshot:</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+v+'" alt="Balancer" width="640px"></p><br><p align="center"><img src="'+x+'" alt="Balancer2" width="640px"></p><br><p align="center"><img src="'+N+'" alt="Balancer3" width="640px"></p></details><p><strong>Now we configure the config here:</strong></p><ol><li><p><strong>Profile Name:</strong> â†’ a custom name</p></li><li><p><strong>Type:</strong> â†’ Group, select a group as input</p></li><li><p><strong>Strategy:</strong> â†’ leastPing, select the config with the lowest ping</p></li><li><p><strong>Custom test URL:</strong> â†’ leave empty</p></li><li><p><strong>Balancer observation interval:</strong> â†’ 300 is okay</p></li></ol><p>And finally, we save it from the checkmark at the top of the screen.</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+S+'" alt="Balancer4" width="640px"></p></details><p>Now a config with the name we chose has been added to the end of the list. If we click on it and press the start button, it should connect.</p><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+I+'" alt="Balancer5" width="640px"></p></details><br><p><strong>So what happened now?</strong></p><p>Now we have created a config to which we have given a subscription link as input and specified that it should take a URL test from the configs inside this sub every few seconds and place the ones with better ping at the beginning of the connection list, meaning it will always connect to the best one.</p><p>Now, under these conditions, out of, say, a thousand configs, we will remain connected until the moment the last config stops working, because as soon as one stops working, it immediately activates the next one, and the next one, and the next one. We no longer need to go to it and select it manually like in NekoBox.</p><p>This is a good idea, its existence is very useful. It can be said that it works like Hiddify or clash and singbox, but at least it is bug-free and doesn&#39;t drive you crazy like Hiddify (God forbid ðŸ¤§ ðŸ˜…)!</p><div class="tip custom-block"><p class="custom-block-title"><strong>Type: Group or List</strong></p><p>We set the second option to Group because we want to create a balancer for our desired subscription link. But if we don&#39;t have a subscription link and just have a few configs without a category in the client, then we can select the List option for this section and then from the bottom of the page, we click on add profile and add our desired configs.</p></div><br><div class="tip custom-block"><p class="custom-block-title"><strong>Strategy: leastPing or leastLoad</strong></p><p>We set the third option, the strategy, to <code>leastPing</code>. As I said, it takes a URL test and activates the config with the best ping for us.</p><p>But it also had another strategy called <code>leastload</code>. This is suitable for times when our subscription link is private or on our own server and we know that the ping of all configs is almost equal, so we choose leastLoad so that the load is distributed fairly and the pressure is not on just one config and one IP, or the IP does not get filtered. The next parameter was random, which is completely clear, it chooses randomly between these two modes.</p></div><h2 id="remote" tabindex="-1">Remote DNS <a class="header-anchor" href="#remote" aria-label="Permalink to &quot;Remote DNS {#remote}&quot;">â€‹</a></h2>',43)),t("p",null,[e[25]||(e[25]=o("In all clients, the Remote DNS section is visible in the settings. You can tell if the remote is correct or not when you are browsing the web. It is not specified in the client itself. Even if you write my name instead of a valid server in the client, your config will still connect and give a ping. If you come to Telegram, you still won't know if it's healthy or broken or filtered for you. Telegram doesn't care about the remote at all and comes up in every way. The best way is to go to the browser and open a website. It doesn't matter which site. For the test, we go to this site, for example: ",-1)),s(n,{href:"https://www.dnsleaktest.com/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[24]||(e[24]=[o("dnsleaktest.com",-1)])]),_:1})]),e[124]||(e[124]=t("p",null,"If it comes up and shows an IP, it means that the remote DNS is generally okay. Click the standard test option and wait for it to send a few requests and then display the queries. In the standard test, if all the queries are not for one country (the location of the config or the active VPN) and it shows different countries, it has two states: either your config is not good (90% probability) or the remote DNS is not interesting. I suggest you test with another config as well.",-1)),e[125]||(e[125]=t("p",null,"But the worse case is that out of the five or six countries that are displayed for you, one or two of them were your real location, i.e., Iran. This means that the config or VPN you have activated is garbage. I will write down some of a good remote servers below.",-1)),t("div",L,[e[27]||(e[27]=t("p",{class:"custom-block-title"},"INFO",-1)),t("p",null,[s(n,{href:"https://t.me/F_NiREvil/620",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[26]||(e[26]=[t("strong",null,"View a list of different DNS and IP test sites",-1)])]),_:1})])]),e[126]||(e[126]=a('<br><h3 id="nekobox-exclave" tabindex="-1">NekoBox / Exclave <a class="header-anchor" href="#nekobox-exclave" aria-label="Permalink to &quot;NekoBox / Exclave&quot;">â€‹</a></h3><p>I don&#39;t remember their default remote DNS exactly, I think it was Google&#39;s DoH. Well, whatever, it doesn&#39;t matter because I remember it wasn&#39;t compatible with Iran&#39;s net and especially worker &amp; page configs. That&#39;s why as soon as you install it, you have to change it to Google&#39;s DNS over HTTPS, but not DoH and at the same time DoH ðŸ˜…</p><p><strong>Google DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://8.8.8.8/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Adguard DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://94.140.14.14/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>controlD DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://freedns.controld.com/p2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Open DNS Cisco:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://208.67.222.222/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Clean Browsing:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tcp://185.228.168.9</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Kernel error</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://dns.kernel-error.de/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Cloudflare UDP:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>udp://1.1.1.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>This last one, Cloudflare, is suitable for warp configs in Hiddify and NekoBox (warp is currently martyred in Iran and China)</p></blockquote><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+q+'" alt="Exclave-Remote-DNS" width="640px"></p></details><br><p>In short, it depends on which one our internet service provider works better with. Based on experience over these three years, Google and Adguard have been suitable for everyone.</p>',21)),t("div",U,[e[37]||(e[37]=t("p",{class:"custom-block-title"},[t("strong",null,"Recommendation")],-1)),t("details",F,[e[33]||(e[33]=t("summary",null,"READ MORE",-1)),t("p",null,[e[29]||(e[29]=o("I suggest you create a DNS for yourself with a worker. With it, you can use all the DoHs that are filtered in Iran. The name of the service is DNA Azadi. A cool group has worked on it. Here is a tutorial on how to make it in text and video format ",-1)),s(n,{href:"https://github.com/NiREvil/vless/tree/main/DNS%20over%20HTTPS/Azadi-DNS",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[28]||(e[28]=[o("link to Azadi DNS creation tutorial",-1)])]),_:1})]),e[34]||(e[34]=t("br",null,null,-1)),e[35]||(e[35]=t("p",{align:"center"},[t("img",{src:r,alt:"Azadi-DNS",width:"640px"})],-1)),e[36]||(e[36]=t("br",null,null,-1)),t("p",null,[e[31]||(e[31]=o("After creating your personal DNS service, come and test it a couple of times with the ",-1)),s(n,{href:"https://diana-cl.github.io/Diana-Cl/topics/iran-core#%D8%AA%D8%B3%D8%AA%D8%B1-dns",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[30]||(e[30]=[o("Darkness DNS Tester",-1)])]),_:1}),e[32]||(e[32]=o(" with the VPN off to see which service gives a better ping and put the address of that DNS in your Azadi panel ðŸ˜‰",-1))])])]),e[127]||(e[127]=a('<br><h3 id="hiddify-v2ray" tabindex="-1">Hiddify / V2ray <a class="header-anchor" href="#hiddify-v2ray" aria-label="Permalink to &quot;Hiddify / V2ray&quot;">â€‹</a></h3><p><strong>It&#39;s better to leave Hiddify on default.</strong> Its default is this:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>udp://1.1.11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Only change it when websites don&#39;t load, as I explained above. Based on experience, when using configs created with worker or page (both vless and trojan), we have to change the default remote to a DNS over HTTPS type, for example, one of these:</p><p><strong>Google DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://8.8.8.8/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Adguard DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://94.140.14.14/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Quad DNS:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://9.9.9.9/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+D+'" alt="Hiddify-Remote-DNS" width="640px"></p></details><br><p>The v2rayNG client uses Cloudflare&#39;s ipv4 DNS by default: <code>1.1.1.1</code></p><p>It&#39;s rare that we need to change it, but if we ever do, we&#39;ll quickly put Google in its place: <code>8.8.8.8</code></p><p>What other client is left? I don&#39;t know, whatever else there is is a fork of these few main clients and naturally its settings are the same as these.</p><br><h2 id="direct" tabindex="-1">Direct DNS / Local DNS <a class="header-anchor" href="#direct" aria-label="Permalink to &quot;Direct DNS / Local DNS {#direct}&quot;">â€‹</a></h2><p>Direct DNS is a DNS server that is used to resolve <code>direct</code> domains (i.e., those that do not pass through the proxy, such as Iranian or LAN sites). Before our proxy config connects, it has another task in addition to that. If the config we have in the client uses a domain in its address section instead of an IP, like most configs, then when we want to connect with that config, the client uses this <code>Direct DNS</code> address to find the IP of the domain. First, it converts the domain of the config to an IP and then starts to perform its task, creating a tunnel, encrypting, tlshello, separating paths, and exchanging traffic, etc.</p><ul><li><p><strong>Default:</strong> Usually gets the Android system DNS (like 8.8.8.8 for Google or 1.1.1.1 for Cloudflare).</p></li><li><p><strong>Why is it important?</strong> If your ISP blocks or manipulates DNS, domestic sites won&#39;t load.</p></li><li><p><strong>Recommendation:</strong> In Exclave&#39;s settings, turn off the &quot;Use system DNS as Direct DNS&quot; option and in the box below it that says &quot;Direct DNS&quot;, put <code>8.8.8.8</code> to always use Google. In Iran, its ipv4 is not filtered and it is fast, and what more could a blind person want from God?</p></li></ul><p>It&#39;s the same for Nekobox, but it doesn&#39;t have that option to turn it on or off. In Nekobox, if you write <code>local</code> in the Direct DNS box, just like that in lowercase, it will use the internal Android DNS, and you can leave it as local or, as explained in the previous paragraph, put <code>8.8.8.8</code> here as well.</p><p>Also, for Direct or Local DNS, you can use a public, neutral, hassle-free, and unfiltered DNS server like Alibaba. In this case, as I said above, you must first turn off the <code>Use system DNS as Direct dns</code> option and then proceed to place your desired server in the box below it. This is Alibaba:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://223.5.5.5/dns-query</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><br><div class="tip custom-block"><p class="custom-block-title"><strong>Customization</strong></p><p>If you want to customize, you can use good Iranian DNSs like Shecan or Electro to open domestic sites faster. It&#39;s similar in both clients. You can find it at this address:</p><blockquote><p>DNS Settings &gt; Direct DNS</p></blockquote><p><strong>Shekan DNS</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>178.22.122.100</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Electro DNS</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>78.157.42.100</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><br><h2 id="dns-routing" tabindex="-1">Enable DNS Routing <a class="header-anchor" href="#dns-routing" aria-label="Permalink to &quot;Enable DNS Routing {#dns-routing}&quot;">â€‹</a></h2><p>In the DNS settings of Nekobox and Exclave, there is an important option called <code>Enable DNS routing</code>. Having this option on means that it sends your DNS queries (requests to convert a domain to an IP) through the proxy (VPN tunnel) instead of going directly to the direct DNS and in some cases, your location being leaked. It passes through the proxy, which is more secure. In my backups, this option is always on by default.</p><p>How to enable it is similar in both clients. Go to this address:</p><blockquote><p>Settings &gt; Enable DNS Routing</p></blockquote><p>and activate it with the button opposite it.</p><ul><li><p><strong>Advantages:</strong> Prevents DNS Leak, meaning your location will no longer be leaked. If it&#39;s off, the DNS goes directly and may be filtered.</p></li><li><p><strong>Disadvantages:</strong> Your connection may be slightly slower (you won&#39;t notice it) because the DNS is also tunneled.</p></li><li><p><strong>Recommendation:</strong> Always turn it on, unless you have a problem with speed.</p></li></ul><details class="details custom-block"><summary>Screenshot of the DNS settings section</summary><br><p align="center"><img src="'+_+'" alt="DNS-Routing" width="640px"></p></details><br><h3 id="fake-dns" tabindex="-1">Enable Fake DNS <a class="header-anchor" href="#fake-dns" aria-label="Permalink to &quot;Enable Fake DNS {#fake-dns}&quot;">â€‹</a></h3><p>In the client, there is another option called <code>Fake DNS</code> that we generally don&#39;t mess with and leave it off, but I will write a brief explanation about it. It&#39;s an anti-leak trick that resolves blocked domains to fake IPs like <code>198.18.0.0/15</code>. Then, the client understands that this IP is fake and sends the traffic to the proxy. This way, even if the main DNS is filtered, the connection is established.</p><p><strong>What does it do?</strong> When Strict Route is active, the client makes sure that not even a single DNS request goes outside the VPN tunnel. If it is inactive, some requests may go directly to the ISP and be filtered or your location may be leaked.</p><p><strong>What&#39;s the problem with it?</strong> If the DNS server you have chosen (such as Remote DNS or Direct DNS) does not work properly or is not compatible with your config, your internet may be completely cut off, because no domain will be resolved anymore.</p><p><strong>When to use it?</strong> When Strict Route is active (in Inbound options) and you have a DNS Leak.</p>',39)),t("p",null,[e[39]||(e[39]=o("We don't have this strict route option in nekobox and exclave, but it is in hiddify (Android and desktop) and the official sing-box client, as well as configs that we write ",-1)),s(n,{href:"https://raw.githubusercontent.com/NiREvil/vless/refs/heads/main/hiddify/H2%20SINGBOX%20HOSS",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[38]||(e[38]=[o("in accordance with the sing-box core structure",-1)])]),_:1}),e[40]||(e[40]=o(", and my main purpose for writing the fake dns explanation was for these few.",-1))]),e[128]||(e[128]=a('<div class="danger custom-block"><p class="custom-block-title"><strong>Note</strong></p><p>If the internet is disconnected after activating Strict Route, turn on Fake DNS and check the routings (it may have a conflict).</p></div><br><h2 id="url-test" tabindex="-1">URL Connection Test <a class="header-anchor" href="#url-test" aria-label="Permalink to &quot;URL Connection Test {#url-test}&quot;">â€‹</a></h2><p>Inside Nekobox, Hiddify, and Exclave, this test server is more important than the remote DNS. I mean this part: <code>connection test URL</code></p><p>which is by default on this one:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://cp.cloudflare.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>which should be changed at the first opportunity to:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://www.google.com/generate_204</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>or this one is not bad either:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://clients3.google.com/generate_204</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+T+'" alt="UR-Test-Server" width="640px"></p></details><br><p>If this remains as its default and you don&#39;t correct it, when you take a test, it will either show all the configs as broken or give a false ping and just put a green number next to them, while no data is exchanged when connecting.</p>',13)),t("div",H,[e[88]||(e[88]=t("p",{class:"custom-block-title"},[t("strong",null,"Here is a list of test servers for use inside clients")],-1)),t("details",G,[e[87]||(e[87]=t("summary",null,"Click here to view the list",-1)),t("ul",null,[e[86]||(e[86]=t("li",null,[t("p",null,"It is recommended to use only the first 5, the rest are just to fill the space")],-1)),t("li",null,[t("p",null,[s(n,{href:"https://www.gstatic.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[41]||(e[41]=[o("https://www.gstatic.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://clients3.google.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[42]||(e[42]=[o("https://clients3.google.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.google.com/gen_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[43]||(e[43]=[o("https://www.google.com/gen_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://api.v2fly.org/checkConnection.svgz",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[44]||(e[44]=[o("https://api.v2fly.org/checkConnection.svgz",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://api.telegram.org/robots.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[45]||(e[45]=[o("https://api.telegram.org/robots.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://cp.cloudflare.com/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[46]||(e[46]=[o("https://cp.cloudflare.com/",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivitycheck.android.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[47]||(e[47]=[o("https://connectivitycheck.android.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivity.gstatic.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[48]||(e[48]=[o("https://connectivity.gstatic.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"http://cachefly.cachefly.net/10mb.test",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[49]||(e[49]=[o("http://cachefly.cachefly.net/10mb.test",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://play.googleapis.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[50]||(e[50]=[o("https://play.googleapis.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://captive.apple.com",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[51]||(e[51]=[o("https://captive.apple.com",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://cp.cloudflare.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[52]||(e[52]=[o("https://cp.cloudflare.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.qualcomm.cn/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[53]||(e[53]=[o("https://www.qualcomm.cn/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.google.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[54]||(e[54]=[o("https://www.google.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://browserleaks.com/ip",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[55]||(e[55]=[o("https://browserleaks.com/ip",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://api.v2fly.org/checkConnection.svgz",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[56]||(e[56]=[o("https://api.v2fly.org/checkConnection.svgz",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://speed.cloudflare.com",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[57]||(e[57]=[o("https://speed.cloudflare.com",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://check.firewalla.com",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[58]||(e[58]=[o("https://check.firewalla.com",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"http://www.gstatic.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[59]||(e[59]=[o("http://www.gstatic.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://172.217.6.238/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[60]||(e[60]=[o("https://172.217.6.238/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://e.foundation/net_204/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[61]||(e[61]=[o("https://e.foundation/net_204/",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://elementary.io/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[62]||(e[62]=[o("https://elementary.io/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://httpstat.us/204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[63]||(e[63]=[o("https://httpstat.us/204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://attwifi.apple.com/library/test/success.html",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[64]||(e[64]=[o("https://attwifi.apple.com/library/test/success.html",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivitycheck.grapheneos.network/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[65]||(e[65]=[o("https://connectivitycheck.grapheneos.network/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://grapheneos.online/gen_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[66]||(e[66]=[o("https://grapheneos.online/gen_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://grapheneos.online/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[67]||(e[67]=[o("https://grapheneos.online/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://captiveportal.kuketz.de",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[68]||(e[68]=[o("https://captiveportal.kuketz.de",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://captive.v2ex.co/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[69]||(e[69]=[o("https://captive.v2ex.co/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.google-analytics.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[70]||(e[70]=[o("https://www.google-analytics.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.msftconnecttest.com/connecttest.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[71]||(e[71]=[o("https://www.msftconnecttest.com/connecttest.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://detectportal.firefox.com/success.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[72]||(e[72]=[o("https://detectportal.firefox.com/success.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.v2ex.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[73]||(e[73]=[o("https://www.v2ex.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connect.rom.miui.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[74]||(e[74]=[o("https://connect.rom.miui.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivitycheck.platform.hicloud.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[75]||(e[75]=[o("https://connectivitycheck.platform.hicloud.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://wifi.vivo.com.cn/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[76]||(e[76]=[o("https://wifi.vivo.com.cn/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://cdn.capenetworks.io/auth",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[77]||(e[77]=[o("https://cdn.capenetworks.io/auth",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://cdn.capenetworks.io/connectivity-check",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[78]||(e[78]=[o("https://cdn.capenetworks.io/connectivity-check",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://35.241.22.134/auth.html",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[79]||(e[79]=[o("https://35.241.22.134/auth.html",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://35.241.22.134/connectivity-check",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[80]||(e[80]=[o("https://35.241.22.134/connectivity-check",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://captive.apple.com/hotspot-detect.html",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[81]||(e[81]=[o("https://captive.apple.com/hotspot-detect.html",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.msftncsi.com/ncsi.txt",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[82]||(e[82]=[o("https://www.msftncsi.com/ncsi.txt",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivitycheck.android.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[83]||(e[83]=[o("https://connectivitycheck.android.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://connectivitycheck.gstatic.com/generate_204",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[84]||(e[84]=[o("https://connectivitycheck.gstatic.com/generate_204",-1)])]),_:1})])]),t("li",null,[t("p",null,[s(n,{href:"https://www.apple.com/library/test/success.html",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[85]||(e[85]=[o("https://www.apple.com/library/test/success.html",-1)])]),_:1})])])])])]),e[129]||(e[129]=a('<br><h2 id="tun-implementation-stack" tabindex="-1">TUN Implementation / Stack <a class="header-anchor" href="#tun-implementation-stack" aria-label="Permalink to &quot;TUN Implementation / Stack&quot;">â€‹</a></h2><p>First of all, let&#39;s say what <strong>TUN</strong> is.</p><p>It is a method that VPN clients (like Nekobox, Exclave, Hiddify, Singbox, and many others) use to route your internet traffic through a VPN tunnel. To put it very simply, TUN creates a virtual layer so that it seems like all our phone&#39;s traffic passes through a secure path or tunnel. Now, this <strong>TUN Implementation</strong> (or in some clients, we know it as Stack) specifies how this tunnel should be implemented. Each of these three options (System, gVisor, Mixed) is a different method for managing this tunnel.</p><p><strong>Where do you find it?</strong></p><ul><li><strong>In Nekobox, go to:</strong></li></ul><blockquote><p>Settings &gt; TUN Settings &gt; TUN Implementation.</p></blockquote><ul><li><strong>In Exclave, it&#39;s in:</strong></li></ul><blockquote><p>Settings &gt; TUN Settings &gt; Stack.</p></blockquote><ul><li><strong>In Hiddify, it&#39;s in:</strong></li></ul><blockquote><p>Config options &gt; inbound options &gt; TUN implementation.</p></blockquote><ul><li><strong>Why is it important?</strong> Choosing the right option can make your connection faster, more stable, or more secure. The wrong choice can also cause the internet to be disconnected or slow down.</li></ul><details class="details custom-block"><summary>View Screenshot</summary><br><p align="center"><img src="'+P+'" alt="TUN-Implementation" width="640px"></p></details><br><h3 id="tun-types" tabindex="-1">TUN Types <a class="header-anchor" href="#tun-types" aria-label="Permalink to &quot;TUN Types&quot;">â€‹</a></h3><h4 id="_1-system" tabindex="-1">1. System <a class="header-anchor" href="#_1-system" aria-label="Permalink to &quot;1. System&quot;">â€‹</a></h4><p>This option uses the Android operating system (or the phone&#39;s internal TUN) to manage the VPN tunnel. This means that the client directly uses Android&#39;s own features to route traffic.</p><br><p><strong>Advantages:</strong></p><ul><li><strong>High speed:</strong> Because it uses the operating system directly, it is usually the fastest option.</li><li><strong>Less battery consumption:</strong> It puts less pressure on the phone&#39;s CPU.</li><li><strong>Good compatibility:</strong> It works well with most devices and configs.</li></ul><br><p><strong>Disadvantages:</strong></p><ul><li><strong>Less security:</strong> Because it uses the operating system, it may be more vulnerable to DNS Leak or more advanced filtering.</li><li><strong>Less control:</strong> If your ISP or operating system manipulates the DNS, problems such as websites not loading may occur.</li></ul><br><p><strong>When to use it?</strong></p><ul><li>If you are looking for speed and stability and security is not very critical for you (for example, for gaming or streaming), System is a good option.</li><li>Also, if your device is old or has weak hardware, this option works better.</li></ul><br><h4 id="_2-gvisor" tabindex="-1">2. gVisor <a class="header-anchor" href="#_2-gvisor" aria-label="Permalink to &quot;2. gVisor&quot;">â€‹</a></h4><p><strong>gVisor</strong> is a technology created by Google to create an isolated and secure environment for running network code. In this mode, instead of using the operating system&#39;s TUN, it creates a separate virtual layer (like a lightweight virtual machine) that manages the traffic.</p><br><p><strong>Advantages:</strong></p><ul><li><strong>High security:</strong> Because the traffic is processed in an isolated environment, the probability of DNS Leak or information leakage is very low.</li><li><strong>Support for complex settings:</strong> It works better for special configs (such as VLESS or Trojan with advanced settings).</li><li><strong>Resistance to filtering:</strong> In Iran, where DNS and protocol filtering is high, gVisor can perform better.</li></ul><br><p><strong>Disadvantages:</strong></p><ul><li><strong>Slower speed:</strong> Because it has an extra layer, it may be slightly slower than System.</li><li><strong>More battery consumption:</strong> Processing in the gVisor environment puts more pressure on the processor (CPU).</li><li><strong>Potential problems:</strong> On some old devices or those with low RAM, it may cause crashes or connection drops.</li></ul><br><p><strong>When to use it?</strong></p><ul><li>If security is a priority for you (for example, to bypass strict filtering or prevent DNS Leak), gVisor is the best choice.</li><li>Especially if you use complex configs or personal servers.</li></ul><br><h4 id="_3-mixed" tabindex="-1">3. Mixed <a class="header-anchor" href="#_3-mixed" aria-label="Permalink to &quot;3. Mixed&quot;">â€‹</a></h4><p>This option is a hybrid mode that tries to combine the advantages of System and gVisor. In this mode, the client switches between System and gVisor depending on the type of traffic or settings.</p><br><p><strong>Advantages:</strong></p><ul><li><strong>Balance between speed and security:</strong> It uses gVisor for sensitive traffic (such as filtered sites) and System for the rest.</li><li><strong>Flexibility:</strong> If you are not sure which option is better, Mixed is a middle choice.</li></ul><br><p><strong>Disadvantages:</strong></p><ul><li><strong>Complexity:</strong> Because it switches between two modes, it may be unstable in some cases or not recognize the settings correctly.</li><li><strong>Need for testing:</strong> You have to see if it works well with your configs and device or not.</li></ul><br><p><strong>When to use it?</strong></p><ul><li>If you don&#39;t know which option is better or you have a variety of configs (for example, you have both simple vless and advanced reality or hysteria), Mixed can be a good starting point.</li></ul><h3 id="which-one-should-we-choose" tabindex="-1">Which one should we choose? <a class="header-anchor" href="#which-one-should-we-choose" aria-label="Permalink to &quot;Which one should we choose?&quot;">â€‹</a></h3><p>For most users in Iran, I have these suggestions:</p><ol><li><p><strong>If you are a beginner or your device is old:</strong> Start with <strong>System</strong>. Its speed is good and it usually works without problems.</p></li><li><p><strong>If security and bypassing filtering are important to you:</strong> Choose <strong>gVisor</strong>, especially if you use <strong>Strict Route</strong> and <strong>Fake DNS</strong> (which I explained in the previous section). Just make sure the Remote DNS is set correctly, like <code>https://8.8.8.8/dns-query</code></p></li><li><p><strong>If you don&#39;t know what&#39;s what:</strong> Choose <strong>Mixed</strong> and test it. If a problem occurs, switch to one of the other two options.</p></li></ol><h3 id="important-points-for-setting-tun-implementation" tabindex="-1">Important points for setting TUN Implementation <a class="header-anchor" href="#important-points-for-setting-tun-implementation" aria-label="Permalink to &quot;Important points for setting TUN Implementation&quot;">â€‹</a></h3>',54)),t("ul",null,[t("li",null,[t("p",null,[e[92]||(e[92]=t("strong",null,"DNS Leak Test:",-1)),e[93]||(e[93]=o(" After choosing any of these options, be sure to check with ",-1)),s(n,{href:"https://www.dnsleaktest.com/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[89]||(e[89]=[o("dnsleaktest.com",-1)])]),_:1}),e[94]||(e[94]=o(" or ",-1)),s(n,{href:"https://ipleak.net/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[90]||(e[90]=[o("ipleak.net",-1)])]),_:1}),e[95]||(e[95]=o(" that your location is not leaked. gVisor is usually more secure, but System may give a DNS Leak. In the standard test with ",-1)),s(n,{href:"https://www.dnsleaktest.com/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[91]||(e[91]=[o("this site",-1)])]),_:1}),e[96]||(e[96]=o(", all queries must be in harmony with the location of your config's IP and not a mix of several different countries. If one of the queries is Iran, the situation is a disaster.",-1))])]),e[97]||(e[97]=t("li",null,[t("p",null,[t("strong",null,"Compatibility with Strict Route and Fake DNS:"),o(" If you have enabled "),t("strong",null,"Strict Route"),o(", it is better to choose gVisor or Mixed, because System may be incompatible with Strict Route and cause a disconnection. Fake DNS also works better with gVisor.")])],-1)),e[98]||(e[98]=t("li",null,[t("p",null,[t("strong",null,"Speed or disconnection problems:"),o(" If your speed decreases with gVisor or Mixed or your connection is disconnected, first check the Remote DNS (for example, change it to Adguard DNS). If it is not fixed, go back to System.")])],-1)),e[99]||(e[99]=t("li",null,[t("p",null,[t("strong",null,"Weak devices:"),o(" If your phone is old or useless (like most Xiaomi phones) or has low RAM (for example, under 4 GB) or a weak CPU, gVisor may cause lag or crashes. In this case, System is better.")])],-1))]),t("p",null,[e[101]||(e[101]=t("strong",null,"Final word",-1)),e[102]||(e[102]=t("br",null,null,-1)),e[103]||(e[103]=o(" The choice between ",-1)),e[104]||(e[104]=t("strong",null,"System",-1)),e[105]||(e[105]=o(", ",-1)),e[106]||(e[106]=t("strong",null,"gVisor",-1)),e[107]||(e[107]=o(", and ",-1)),e[108]||(e[108]=t("strong",null,"Mixed",-1)),e[109]||(e[109]=o(" depends on your needs: speed, security, or something in between. My suggestion is to start with ",-1)),e[110]||(e[110]=t("strong",null,"gVisor",-1)),e[111]||(e[111]=o(", because in Iran with heavy filtering, its security is useful. If a problem occurs, switch to Mixed or System. Always after changing the settings, with a simple test (like opening a filtered site or checking ",-1)),s(n,{href:"https://www.dnsleaktest.com/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[100]||(e[100]=[o("dnsleaktest.com",-1)])]),_:1}),e[112]||(e[112]=o("), make sure everything is working correctly.",-1))]),e[130]||(e[130]=a('<br><h2 id="summary" tabindex="-1">Summary of Recommendations <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary of Recommendations {#summary}&quot;">â€‹</a></h2><h3 id="in-nekobox-exclave" tabindex="-1">In NekoBox/Exclave <a class="header-anchor" href="#in-nekobox-exclave" aria-label="Permalink to &quot;In NekoBox/Exclave&quot;">â€‹</a></h3><ul><li><strong>Remote DNS</strong> â†’ <code>https://8.8.8.8/dns-query</code></li><li><strong>Direct DNS</strong> â†’ Set it to system</li><li><strong>DNS Routing</strong> â†’ Turn it on</li><li><strong>Fake DNS</strong> â†’ Turn it off</li><li><strong>Use system DNS as Bootstrap DNS</strong> â†’ Leave it on</li><li><strong>Enable Sniffing</strong> â†’ Leave it on</li><li><strong>Hijack DNS</strong> â†’ Leave it on</li><li><strong>TUN Implementation/Stack</strong> â†’ Set it to gVisor unless the phone is old, then set it to system</li><li><strong>Connection Test URL</strong> â†’ Be sure to change the default to the following address:</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://www.gstatic.com/generate_204</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><br><h3 id="in-hiddify" tabindex="-1">In Hiddify <a class="header-anchor" href="#in-hiddify" aria-label="Permalink to &quot;In Hiddify&quot;">â€‹</a></h3><ul><li><strong>Remote DNS</strong> â†’ Default or <code>https://8.8.8.8/dns-query</code></li><li><strong>Direct DNS</strong> â†’ Default <code>1.1.1.1</code></li><li><strong>DNS Routing</strong> â†’ Turn it on</li><li><strong>Strict Route</strong> â†’ Turn it on</li><li><strong>TUN Implementation</strong> â†’ Set it to gVisor</li><li><strong>Connection Test URL</strong> â†’ Be sure to change the default to the following address:</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://www.gstatic.com/generate_204</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><br><h3 id="in-v2rayng-and-mahsang" tabindex="-1">In V2rayNG and MahsaNG <a class="header-anchor" href="#in-v2rayng-and-mahsang" aria-label="Permalink to &quot;In V2rayNG and MahsaNG&quot;">â€‹</a></h3><ul><li><strong>Sniffing</strong> â†’ Leave it on for sure</li><li><strong>Local DNS</strong> â†’ Turn it on</li><li><strong>Fake DNS</strong> â†’ Turn it off</li><li><strong>Mux</strong> â†’ Always off</li><li><strong>Fragment</strong> â†’ Default off, we turn it on if the config domain is filtered. <ul><li><strong>Length</strong> â†’ 10-30</li><li><strong>Interval</strong> â†’ 1-2</li><li><strong>Packets</strong> â†’ tlshello</li></ul></li><li><strong>Allow Insecure</strong> â†’ Always on</li><li><strong>Remote DNS</strong> â†’ <code>1.1.1.1</code> or <code>8.8.8.8</code></li><li><strong>Domestic DNS</strong> â†’ Like remote <code>1.1.1.1</code></li><li><strong>Intelligent Selection Method</strong> â†’ Least Ping</li><li><strong>Connection Test URL</strong> â†’ Check that it is like the following address:</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://www.gstatic.com/generate_204</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><br><p>This way, the clients have a principled, ideal, standard setting according to the structure and recommended instructions in the xray and singbox cores, and most importantly, a stable and secure connection ðŸ˜Ž</p><br><h2 id="download" tabindex="-1">Download Links <a class="header-anchor" href="#download" aria-label="Permalink to &quot;Download Links {#download}&quot;">â€‹</a></h2>',17)),t("ul",null,[t("li",null,[s(n,{href:"https://github.com/MatsuriDayo/NekoBoxForAndroid/releases",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[113]||(e[113]=[o("NekoBox GitHub",-1)])]),_:1}),t("ul",null,[t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3495",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[114]||(e[114]=[o("NekoBox from repository",-1)])]),_:1})]),t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3497",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[115]||(e[115]=[o("NekoBox Backup File",-1)])]),_:1})])])]),t("li",null,[s(n,{href:"https://github.com/dyhkwong/Exclave/releases",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[116]||(e[116]=[o("Exclave GitHub",-1)])]),_:1}),t("ul",null,[t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3498",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[117]||(e[117]=[o("Exclave installation file from repository",-1)])]),_:1})]),t("li",null,[s(n,{href:"https://t.me/new_folder_revil/3500",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[118]||(e[118]=[o("Exclave Backup File",-1)])]),_:1})])])]),t("li",null,[s(n,{href:"https://github.com/NiREvil/vless/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[119]||(e[119]=[o("Subscription Links Repository",-1)])]),_:1})])])])}const Q=C(B,[["render",M]]);export{X as __pageData,Q as default};
