<!DOCTYPE html>
<html lang="fa-IR" dir="rtl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cloudflare backend selector | </title>
    <meta name="description" content="دامنه با آی‌پی‌های رندوم کلادفلر">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/Diana-Cl/assets/style.BZ8UTX1d.css" as="style">
    <link rel="preload stylesheet" href="/Diana-Cl/vp-icons.css" as="style">
    
    <script type="module" src="/Diana-Cl/assets/app.K2ByyFBf.js"></script>
    <link rel="preload" href="/Diana-Cl/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Diana-Cl/assets/chunks/theme.BKTOHK9q.js">
    <link rel="modulepreload" href="/Diana-Cl/assets/chunks/framework.B7RY4Fck.js">
    <link rel="modulepreload" href="/Diana-Cl/assets/topics_cf-backend-selector.md.CXhzbdEV.lean.js">
    <link rel="icon" href="/Diana-Cl/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&amp;display=swap" rel="stylesheet">
    <meta name="theme-color" content="#5f67ee">
    <link rel="stylesheet" href="https://unpkg.com/video.js@8.17.4/dist/video-js.min.css">
    <script src="https://unpkg.com/video.js@8.17.4/dist/video.min.js"></script>
    <style>
      .video-js {
        width: 100%;
        max-width: 960px;
        height: auto;
        aspect-ratio: 16/9;
      }
    </style>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="keywords" content="Cloudflare Workers, Failover backend, CDN Scan, Clean Ip, Load balance, Cloudflare pages">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/Diana-Cl/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4></span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Diana-Cl/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🏠 خانه</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Diana-Cl/topics/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>📚 یادداشت‌ها</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Diana-Cl/wa/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🪟 فعال‌سازی ویندوز</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-6aa21345 data-v-88af2de4 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><span class="vpi-languages option-icon" data-v-cf11d7a2></span><!----><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="items" data-v-88af2de4><p class="title" data-v-88af2de4>فارسی</p><!--[--><div class="VPMenuLink" data-v-88af2de4 data-v-35975db6><a class="VPLink link" href="/Diana-Cl/en/topics/cf-backend-selector" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="group translations" data-v-bb2aa2f0><p class="trans-title" data-v-bb2aa2f0>فارسی</p><!--[--><div class="VPMenuLink" data-v-bb2aa2f0 data-v-35975db6><a class="VPLink link" href="/Diana-Cl/en/topics/cf-backend-selector" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>📚 یادداشت‌ها</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/Gemini" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>گوگل جمنای</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/poker-texas" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>پوکر – تگزاس هولدم</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/ai-agents" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>دستیارهای هوش مصنوعی</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/sleeping-apps" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>خواب عمیق اپلیکیشن‌ها</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/Stable-Diffusion" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>استیبل دیفیوژن</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/REvil" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>REvil</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/cf-backend-selector" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>انتخابگر بک‌اند کلادفلر</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Diana-Cl/topics/Upgrade-PHP-version-on-CentOS-7" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>آپگرید PHP روی CentOS 7</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _Diana-Cl_topics_cf-backend-selector" data-v-39a288b8><div><h1 id="دامنه-به-جای-آی‌پی-تمیز-کلادفر" tabindex="-1">دامنه به جای آی‌پی تمیز کلادفر <a class="header-anchor" href="#دامنه-به-جای-آی‌پی-تمیز-کلادفر" aria-label="Permalink to &quot;دامنه به جای آی‌پی تمیز کلادفر&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">توضیحات</p><p><strong>بعد از ساخت کانفیگ با وورکر، برای انتخاب آی‌پی تمیز چند حالت پیش میاد:</strong></p><ul><li>یا باید از دامنه خود وورکر استفاده کنیم.</li><li>یا باید از کدهایی مثل <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NiREvil/Harmony" title="harmony" target="_blank" rel="noreferrer" data-v-7fde401a><!--[-->هارمونی<!--]--><!----></a> استفاده کنیم برای ساخت لینک ساب.</li><li>یا آی‌پی تمیز اسکن کنیم هر چند وقت یکبار و جایگزین کنیم در کانفیگ‌ها.</li><li>یا از دامنه‌ یکی از سایت‌هایی که پشت کلادفلر هستن استفاده کنیم در کانفیگ مثلا دامنه‌ <code>zula.ir</code>.</li></ul><p><strong>ولی بازم چندتا مشکل داریم:</strong></p><ul><li>از دامنه وورکر نمی‌تونیم استفاده کنیم چون فیلتر میشه</li><li>بخوایم از هارمونی کمک بگیریم حداقل ده دقیقه زمان میخواد و ممکنه هرکسی بلد نباشه وورکر اون رو بسازه</li><li>آی‌پی تمییز اسکن کردن خودش یه پروسه حوصله سر بر هست جایگزین کردنشون داخل کانفیگ از اونم بدتر</li><li>از دامنه هایی مثل اسپیدتست هم استفاده کنیم ممکنه چند ساعت از روز اختلال داشته باشن یا سرورها تحت تعمیر باشن یا فیلتر بشن و ..، و دقیقا همین جاست که این کد به چشم میاد.</li><li>خیلی خلاصه توضیح میدم عملکرد کد رو</li></ul></div><h2 id="ایجاد-وورکر-کلادفلر" tabindex="-1">ایجاد وورکر کلادفلر <a class="header-anchor" href="#ایجاد-وورکر-کلادفلر" aria-label="Permalink to &quot;ایجاد وورکر کلادفلر&quot;">​</a></h2><p>در ابتدا کد <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NiREvil/vless/blob/main/edge/cf-proxy-selector.js" target="_blank" rel="noreferrer" data-v-7fde401a><!--[-->Worker<!--]--><!----></a> رو از گیتهاب کپی و یک وورکر جدید Deploy کنید بعد لینک وورکری که ساختید رو در قسمت آی‌پی آدرس هر کانفیگی که خواستید می‌تونید استفاده کنید.</p><h2 id="عملکرد-اسکریپت" tabindex="-1">عملکرد اسکریپت <a class="header-anchor" href="#عملکرد-اسکریپت" aria-label="Permalink to &quot;عملکرد اسکریپت&quot;">​</a></h2><p>عملکردش به این‌شکل هست که با هر بار قطع و وصل کردن کانفیگ، یکی از دامنه‌هایی که از قبل داخل کد قرار دادیم به شکل رندوم انتخاب میشه. برای مثال وقتی به کانفیگ کانکت شدید فرضا این بار آی‌پی تمیز شما <code>zula.ir</code> انتخاب شده و حس می‌کنید کانکشن خوبی ندارید یا پینگ بالا هست فقط کافیه یکبار قطع و وصل کنید تا یک دامین دیگه‌ای از لیست جایگزین زولا انتخاب کنه براتون، به همین سادگی.</p><h2 id="متغیرها" tabindex="-1">متغیرها <a class="header-anchor" href="#متغیرها" aria-label="Permalink to &quot;متغیرها&quot;">​</a></h2><p>لیست دامنه‌های داخل کد رو به دلخواه خودتون می‌تونید تغییر بدید، دوتا دامنه توی لیست باقی بذارید یا صدتا مهم نیست. میتونید از اسکنر ویندوزی که لینکش رو پایین پست گذاشتم کمک بگیرید برای اسکن CDN و قرار دادن نتایج از طریق ... الان میگم.<br> مهم اینه که از دفعه بعد دیگه سراغ ویرایش کد نرید، با ایجاد یک متغیر به اسم <code>HOST</code> هر دامنه‌ای رو که می خواستید اضافه کنید به اسکریپت. دامنه ها باید با کاما از هم جدا بشن مثل bpb، مثلا:</p><blockquote><p>zula.ir,creativecommons.org,ip.sb</p></blockquote><p>و الی آخر. دوتا متغیر دیگه هم می‌تونیم تعریف کنیم ولی برای شما اصلا نیاز نیست، دو متغیر دیگه صرفا برای مقاصد خاص استفاده میشن و فعلا نادیده می‌گیریم.</p><br><h2 id="جدول-متغیرها" tabindex="-1">جدول متغیرها <a class="header-anchor" href="#جدول-متغیرها" aria-label="Permalink to &quot;جدول متغیرها&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">نام متغیر</th><th style="text-align:center;">توضیحات</th><th style="text-align:center;">مقدار پیش‌فرض</th><th style="text-align:center;">مثال</th></tr></thead><tbody><tr><td style="text-align:center;"><code>HOST</code></td><td style="text-align:center;">لیست دامنه‌های پشت کلادفلر (با کاما جدا شده‌اند)</td><td style="text-align:center;">لیست پیش‌فرض</td><td style="text-align:center;"><code>zula.ir,ip.sb,fbi.gov</code></td></tr><tr><td style="text-align:center;"><code>PATH</code></td><td style="text-align:center;">مسیر درخواست ارسالی به دامنه‌ها</td><td style="text-align:center;"><code>/</code></td><td style="text-align:center;"><code>/api/assets/data</code></td></tr><tr><td style="text-align:center;"><code>CODE</code></td><td style="text-align:center;">کد وضعیت HTTP مورد انتظار از پاسخ دامنه‌ها</td><td style="text-align:center;"><code>200</code></td><td style="text-align:center;"><code>200</code> یا <code>404</code></td></tr></tbody></table><hr><br><h3 id="environment-variables" tabindex="-1">Environment variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment variables&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:center;">Variable Names</th><th style="text-align:center;">Description</th><th style="text-align:center;">Default Value</th><th style="text-align:center;">Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>HOST</code></td><td style="text-align:center;">List of backend domains (separated by commas)</td><td style="text-align:center;">Default List</td><td style="text-align:center;"><code>zula.ir,ip.sb,fbi.gov</code></td></tr><tr><td style="text-align:center;"><code>PATH</code></td><td style="text-align:center;">Request path sent to backend domains</td><td style="text-align:center;"><code>/</code></td><td style="text-align:center;"><code>/api/assets/data</code></td></tr><tr><td style="text-align:center;"><code>CODE</code></td><td style="text-align:center;">Expected HTTP status code from backend domains</td><td style="text-align:center;"><code>200</code></td><td style="text-align:center;"><code>200</code> or <code>404</code></td></tr></tbody></table><br><h3 id="متغیر-1-host" tabindex="-1">متغیر 1. HOST <a class="header-anchor" href="#متغیر-1-host" aria-label="Permalink to &quot;متغیر 1. HOST&quot;">​</a></h3><ul><li><strong>لیست دامنه‌های پشت کلادفلر که با کاما از هم جدا شده‌اند.</strong> اگر تنظیم نشود، از لیست پیش‌فرض داخل کد استفاده می‌شود.</li></ul><blockquote><p><strong>English:</strong> A comma-separated list of backend domains. If not set, the default list is used</p></blockquote><br><h3 id="متغیر-2-path" tabindex="-1">متغیر 2. PATH <a class="header-anchor" href="#متغیر-2-path" aria-label="Permalink to &quot;متغیر 2. PATH&quot;">​</a></h3><ul><li><strong>مسیر درخواست ارسالی به دامنه‌ها،</strong> اگر تنظیم نشود، مقدار پیش‌فرض <code>/</code> استفاده می‌شود.</li></ul><blockquote><p><strong>English:</strong> The request path sent to domains. If not set, the default value <code>/</code> is used.</p></blockquote><br><h3 id="متغیر-3-code" tabindex="-1">متغیر 3. CODE <a class="header-anchor" href="#متغیر-3-code" aria-label="Permalink to &quot;متغیر 3. CODE&quot;">​</a></h3><ul><li><strong>کد وضعیت HTTP مورد انتظار از پاسخ دامنه‌های لیست،</strong> اگر تنظیم نشود، مقدار پیش‌فرض <code>200</code> استفاده می‌شود.</li></ul><blockquote><p><strong>English:</strong> The expected HTTP status code from backend domains. If not set, the default value <code>200</code> is used</p></blockquote><br><h2 id="ساختار-کد" tabindex="-1">ساختار کد <a class="header-anchor" href="#ساختار-کد" aria-label="Permalink to &quot;ساختار کد&quot;">​</a></h2><p>کدی که در پایین صفحه قرار داره فقط واسه مشاهده ساختار کد هست و قابل استفاده نیست لطفا فقط از <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NiREvil/vless/blob/main/edge/cf-proxy-selector.js" target="_blank" rel="noreferrer" data-v-7fde401a><!--[-->JavaScript<!--]--><!----></a> اون رو کپی کنید.</p><br><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.pathname;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.search;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // backend domain list</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backendDomains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;creativecommons.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;go.inmobi.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;diana.nscl.ir&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;gur.gov.ua&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;fbi.gov&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;ip.sb&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;skk.moe&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;time.is&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;zula.ir&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.gov.ua&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.wto.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.csgo.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.cdnjs.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.iakeys.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.udacity.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.ipaddress.my&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.speedtest.net&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.ipchicken.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;www.glassdoor.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // If HOST exists in environment variables, get new backend domain list using ADD function</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) backendDomains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Get test path, default is &#39;/sub&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Ensure test path starts with &#39;/&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (testPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">charAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) testPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testPath;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> responseCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;200&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Log number of backend domains and their list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      `Backend count: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backendDomains</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Backend domains: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backendDomains</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Test path: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">testPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Response code: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">responseCode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Store failed backend domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> failedBackends </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Function to wrap request logic with timeout functionality</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1618</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), timeout);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resource, {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        signal: controller.signal,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Function to select backend domain and make request</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getValidResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">backendDomains</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Loop while backend domain list is not empty</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (backendDomains.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Randomly select a backend domain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> randomBackend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backendDomains[Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backendDomains.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Remove selected domain from the list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        backendDomains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backendDomains.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> host </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> randomBackend);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url.hostname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> randomBackend; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// domain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url.pathname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url.search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;?&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // Make request with timeout</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            timeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1618</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // If response status is 200, request is successful</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (response.status.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> responseCode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) url.pathname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Using backend: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //console.log(`Failed backends: ${failedBackends}`);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Remaining backends: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backendDomains</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            url.search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, request));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Failed backend: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // Catch request errors, add failed backend to the failed list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          failedBackends.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(randomBackend);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // If all backends fail, throw error</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;All backends are unavailable!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content-type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text/plain; charset=utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Call getValidResponse function to get valid response</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getValidResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request, backendDomains);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">envadd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Replace tabs, double quotes, single quotes and newlines with commas</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Then replace multiple consecutive commas with single comma</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> envadd.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[ |&quot;&#39;\r\n]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Remove leading and trailing commas (if any)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (addtext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">charAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) addtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addtext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (addtext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">charAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(addtext.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) addtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addtext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, addtext.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Split string by comma to get address array</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addtext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br></div></div><h2 id="اسکنر-دامنه" tabindex="-1">اسکنر دامنه <a class="header-anchor" href="#اسکنر-دامنه" aria-label="Permalink to &quot;اسکنر دامنه&quot;">​</a></h2><p>برای اسکن کردن دامنه های پشت کلادفلر کافیه این فایل نصبی رو دانلود و روی ویندوز اجرا کنید با اینترنت عادی خودتون، حواستون باشه vpn روشن نباشه.</p><p>دو سه دقیقه طول میکشه تا تموم شه و پس از اتمام کار اسکنر، پنجره <code>cmd</code> رو ببندید و برگردید داخل فولدر اسکنر، یه فایل به اسم <code>CDNym.txt</code> خواهید دید که تازه ایجاد شده و داخلش نتایج اسکن اخیر هست. لیست دامنه‌ها به ترتیب بهتر بودن پینگ نسبت به اینترنت شماست.</p><p><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NiREvil/vless/raw/refs/heads/main/edge/cdn%20scanner-win64-v23.8.18.exe" target="_blank" rel="noreferrer" data-v-7fde401a><!--[-->Download CDN Scanner - Win-64 - v23.8.18<!--]--><!----></a></p><p align="center"><img src="https://github.com/user-attachments/assets/4e2e4b0d-a1ea-4c30-a1ea-b1a8c5581c12" alt="Scanner" width="580px"></p><hr></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Diana-Cl/Diana-Cl/edit/main/docs/topics/cf-backend-selector.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> این صفحه را در گیت‌هاب ویرایش کنید<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/Diana-Cl/topics/REvil" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>صفحه قبلی</span><span class="title" data-v-e257564d>REvil</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/Diana-Cl/topics/Upgrade-PHP-version-on-CentOS-7" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>صفحه بعدی</span><span class="title" data-v-e257564d>آپگرید PHP روی CentOS 7</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_index.md\":\"CzaN9ZS6\",\"en_topics_ai-agents.md\":\"CZYcDWKd\",\"en_topics_cf-backend-selector.md\":\"CG8KULJg\",\"en_topics_gemini.md\":\"CR-4Hq_E\",\"en_topics_index.md\":\"iQkaVRjY\",\"en_topics_poker-texas.md\":\"ldF6O8wS\",\"en_topics_revil.md\":\"Df2o-OXP\",\"en_topics_stable-diffusion.md\":\"sXNP6E2X\",\"en_topics_upgrade-php-version-on-centos-7.md\":\"BO5DRTN5\",\"en_wa_change_edition_issues.md\":\"q0t7VXM3\",\"en_wa_change_office_edition.md\":\"B-zvThvG\",\"en_wa_change_windows_edition.md\":\"B4BBnrUX\",\"en_wa_chart.md\":\"B6aoLKEe\",\"en_wa_clean_install_windows.md\":\"BQpcXA8K\",\"en_wa_command_line_switches.md\":\"B-CEkbQR\",\"en_wa_credits.md\":\"ZxlDezwu\",\"en_wa_evaluation_editions.md\":\"Dcw86oNE\",\"en_wa_faq.md\":\"hPqzMUnH\",\"en_wa_fix-wpa-registry.md\":\"kyTBdUTg\",\"en_wa_fix_powershell.md\":\"DflekPUi\",\"en_wa_fix_service.md\":\"Y5tOiaGB\",\"en_wa_genuine-installation-media.md\":\"nLULCPNB\",\"en_wa_guide_links.md\":\"BrBzFHL8\",\"en_wa_hwid.md\":\"CNyupXxt\",\"en_wa_in-place_repair_upgrade.md\":\"CZHJhEaq\",\"en_wa_index.md\":\"T3Qg8TTN\",\"en_wa_issues_due_to_gaming_spoofers.md\":\"BTs8TmWI\",\"en_wa_kms.md\":\"GX6BJdQ6\",\"en_wa_kms38.md\":\"C0VremyO\",\"en_wa_licensing-servers-issue.md\":\"DeLP6sH4\",\"en_wa_manual_hwid_activation.md\":\"BETexMDp\",\"en_wa_manual_kms38_activation.md\":\"BN9ePC5I\",\"en_wa_manual_ohook_activation.md\":\"CdxNJ9ul\",\"en_wa_oem-folder.md\":\"CZt9X9OI\",\"en_wa_office-license-is-not-genuine.md\":\"rKmKDhdN\",\"en_wa_office_c2r.md\":\"GNMyzE-V\",\"en_wa_ohook.md\":\"D-aT-Q32\",\"en_wa_online_kms.md\":\"MSD8DCfs\",\"en_wa_remove_malware.md\":\"GWfzAUOG\",\"en_wa_troubleshoot.md\":\"DxQ2f17t\",\"en_wa_tsforge.md\":\"B4_8kefY\",\"en_wa_unsupported_products_activation.md\":\"COLFa-ur\",\"en_wa_windows10_eol.md\":\"CRHEWbxq\",\"en_wa_windows_10_links.md\":\"BzeDtCWN\",\"en_wa_windows_11_links.md\":\"pf6ych8t\",\"en_wa_windows_7_links.md\":\"927xngqc\",\"en_wa_windows_8.1_links.md\":\"MES5qOlf\",\"en_wa_windows_arm_links.md\":\"DeidRFVN\",\"en_wa_windows_ltsc_links.md\":\"MWV5lF9g\",\"en_wa_windows_xp_links.md\":\"C7rjAgQo\",\"index.md\":\"DTC42XpK\",\"topics_ai-agents.md\":\"DYfv2XMN\",\"topics_cf-backend-selector.md\":\"CXhzbdEV\",\"topics_gemini.md\":\"DTsAPbkK\",\"topics_index.md\":\"CkbzWxNt\",\"topics_poker-texas.md\":\"CSnOfMxI\",\"topics_revil.md\":\"B2JQhdV2\",\"topics_sleeping-apps.md\":\"OzH9hB59\",\"topics_stable-diffusion.md\":\"CdfUCPPy\",\"topics_upgrade-php-version-on-centos-7.md\":\"D35xaaKH\",\"wa_change_edition_issues.md\":\"BhD7v2RF\",\"wa_change_office_edition.md\":\"C0DdksJi\",\"wa_change_windows_edition.md\":\"B-QU17W7\",\"wa_chart.md\":\"Bs-BeV37\",\"wa_clean_install_windows.md\":\"CjDVkBNG\",\"wa_command_line_switches.md\":\"DtS5rLx1\",\"wa_credits.md\":\"DV2A0uBW\",\"wa_evaluation_editions.md\":\"B2wRwSvo\",\"wa_faq.md\":\"DMtNHsi0\",\"wa_fix-wpa-registry.md\":\"hJMiL8iW\",\"wa_fix_powershell.md\":\"DHUlzFr2\",\"wa_fix_service.md\":\"CqJYkrge\",\"wa_genuine-installation-media.md\":\"DsVR_SVc\",\"wa_guide_links.md\":\"COkbymrl\",\"wa_hwid.md\":\"BYgYH8E2\",\"wa_in-place_repair_upgrade.md\":\"PyEkq3VI\",\"wa_index.md\":\"kLXi7QBJ\",\"wa_issues_due_to_gaming_spoofers.md\":\"CVYubnGC\",\"wa_kms.md\":\"DZ3_xuIc\",\"wa_kms38.md\":\"fN2KAx0W\",\"wa_licensing-servers-issue.md\":\"MY-kexK4\",\"wa_manual_hwid_activation.md\":\"CykhvWI7\",\"wa_manual_kms38_activation.md\":\"DRoKdzGw\",\"wa_manual_ohook_activation.md\":\"F5HEYFxC\",\"wa_oem-folder.md\":\"CqXbQC-v\",\"wa_office-license-is-not-genuine.md\":\"CjIH3Tpn\",\"wa_office_c2r.md\":\"DrA81c1W\",\"wa_ohook.md\":\"8rhwoOXm\",\"wa_online_kms.md\":\"C7NBJA58\",\"wa_remove_malware.md\":\"B-iXTkjm\",\"wa_troubleshoot.md\":\"BcPePnLm\",\"wa_tsforge.md\":\"DE4NtDSk\",\"wa_windows10_eol.md\":\"AidZt0iQ\",\"wa_windows_10_links.md\":\"s2L79r0H\",\"wa_windows_11_links.md\":\"CG-p_DDc\",\"wa_windows_7_links.md\":\"BGxqSOE1\",\"wa_windows_8.1_links.md\":\"BHErPWE_\",\"wa_windows_arm_links.md\":\"CHnowLMu\",\"wa_windows_ltsc_links.md\":\"B8WNkuJI\",\"wa_windows_xp_links.md\":\"DYviq0x1\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/Diana-Cl/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{\"root\":{\"label\":\"فارسی\",\"lang\":\"fa-IR\",\"dir\":\"rtl\",\"title\":\"\",\"description\":\"\",\"themeConfig\":{\"nav\":[{\"text\":\"🏠 خانه\",\"link\":\"/\"},{\"text\":\"📚 یادداشت‌ها\",\"link\":\"/topics/\"},{\"text\":\"🪟 فعال‌سازی ویندوز\",\"link\":\"/wa/\"}],\"sidebar\":{\"/topics/\":[{\"text\":\"📚 یادداشت‌ها\",\"items\":[{\"text\":\"گوگل جمنای\",\"link\":\"/topics/Gemini\"},{\"text\":\"پوکر – تگزاس هولدم\",\"link\":\"/topics/poker-texas\"},{\"text\":\"دستیارهای هوش مصنوعی\",\"link\":\"/topics/ai-agents\"},{\"text\":\"خواب عمیق اپلیکیشن‌ها\",\"link\":\"/topics/sleeping-apps\"},{\"text\":\"استیبل دیفیوژن\",\"link\":\"/topics/Stable-Diffusion\"},{\"text\":\"REvil\",\"link\":\"/topics/REvil\"},{\"text\":\"انتخابگر بک‌اند کلادفلر\",\"link\":\"/topics/cf-backend-selector\"},{\"text\":\"آپگرید PHP روی CentOS 7\",\"link\":\"/topics/Upgrade-PHP-version-on-CentOS-7\"}]}],\"/wa/\":[{\"text\":\"راهنمای فعال‌سازی\",\"collapsed\":true,\"items\":[{\"text\":\"فعال‌سازی با روش HWID\",\"link\":\"/wa/\"},{\"text\":\"فعال‌سازی با روش KMS\",\"link\":\"/wa/kms\"},{\"text\":\"مقایسه انواع روش‌ها\",\"link\":\"/wa/chart\"},{\"text\":\"دانلود ویندوز – آفیس\",\"link\":\"/wa/genuine-installation-media\"}]},{\"text\":\"روش‌های فعال‌سازی\",\"collapsed\":true,\"items\":[{\"text\":\"جزئیات روش HWID\",\"link\":\"/wa/hwid\"},{\"text\":\"جزئیات روش Ohook\",\"link\":\"/wa/ohook\"},{\"text\":\"جزئیات روش TSforge\",\"link\":\"/wa/tsforge\"},{\"text\":\"جزئیات روش KMS38\",\"link\":\"/wa/kms38\"},{\"text\":\"جزئیات روش Online KMS\",\"link\":\"/wa/online_kms\"},{\"text\":\"تغییر نسخه ویندوز\",\"link\":\"/wa/change_windows_edition\"},{\"text\":\"تغییر نسخه آفیس\",\"link\":\"/wa/change_office_edition\"},{\"text\":\"پوشه‌های $OEM$\",\"link\":\"/wa/oem-folder\"},{\"text\":\"سوئیچ‌ها در خط فرمان\",\"link\":\"/wa/command_line_switches\"}]},{\"text\":\"جزئیات فنی\",\"collapsed\":true,\"items\":[{\"text\":\"ویندوز ۱۰ بعد از پایان پشتیبانی\",\"link\":\"/wa/windows10_eol\"},{\"text\":\"حذف بدافزارها\",\"link\":\"/wa/remove_malware\"},{\"text\":\"نصب تمیز و اصولی ویندوز\",\"link\":\"/wa/clean_install_windows\"},{\"text\":\"لایسنس آفیس اصل نیست\",\"link\":\"/wa/office-license-is-not-genuine\"},{\"text\":\"مشکل سرورهای لایسنس\",\"link\":\"/wa/licensing-servers-issue\"},{\"text\":\"مشکلات ناشی از اسپوفرهای گیم\",\"link\":\"/wa/issues_due_to_gaming_spoofers\"},{\"text\":\"مشکلات تغییر نسخه\",\"link\":\"/wa/change_edition_issues\"},{\"text\":\"نسخه‌های ارزیابی\",\"link\":\"/wa/evaluation_editions\"},{\"text\":\"رفع مشکل پاورشل\",\"link\":\"/wa/fix_powershell\"},{\"text\":\"رفع مشکل سرویس‌های ویندوز\",\"link\":\"/wa/fix_service\"},{\"text\":\"رفع مشکل رجیستری WPA\",\"link\":\"/wa/fix-wpa-registry\"},{\"text\":\"آپگرید تعمیری در محل\",\"link\":\"/wa/in-place_repair_upgrade\"},{\"text\":\"نصب سفارشی Office c2r\",\"link\":\"/wa/office_c2r\"}]},{\"text\":\"راهنمای فعال‌سازی دستی\",\"collapsed\":true,\"items\":[{\"text\":\"نصب دستی HWID\",\"link\":\"/wa/manual_hwid_activation\"},{\"text\":\"نصب دستی Ohook\",\"link\":\"/wa/manual_ohook_activation\"},{\"text\":\"نصب دستی KMS38\",\"link\":\"/wa/manual_kms38_activation\"}]},{\"text\":\"پشتیبانی\",\"collapsed\":true,\"items\":[{\"text\":\"گزارش مشکلات\",\"link\":\"/wa/troubleshoot\"},{\"text\":\"سوالات متداول\",\"link\":\"/wa/faq\"},{\"text\":\"منابع\",\"link\":\"/wa/credits\"}]}]},\"editLink\":{\"pattern\":\"https://github.com/Diana-Cl/Diana-Cl/edit/main/docs/:path\",\"text\":\"این صفحه را در گیت‌هاب ویرایش کنید\"},\"docFooter\":{\"prev\":\"صفحه قبلی\",\"next\":\"صفحه بعدی\"},\"lastUpdated\":{\"text\":\"آخرین بروزرسانی\"}}},\"en\":{\"label\":\"English\",\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Dìana\",\"description\":\"My personal notes and articles about technology, security, and AI\",\"themeConfig\":{\"nav\":[{\"text\":\"🏠 Home\",\"link\":\"/en/\"},{\"text\":\"📚 Notes\",\"link\":\"/en/topics/\"},{\"text\":\"🪟 Windows Activation\",\"link\":\"/en/wa/\"}],\"sidebar\":{\"/en/topics/\":[{\"text\":\"📚 Notes\",\"items\":[{\"text\":\"Google Gemini\",\"link\":\"/en/topics/Gemini\"},{\"text\":\"Poker – Texas Holdem\",\"link\":\"/en/topics/poker-texas\"},{\"text\":\"Ai Agents\",\"link\":\"/en/topics/ai-agents\"},{\"text\":\"Stable Diffusion\",\"link\":\"/en/topics/Stable-Diffusion\"},{\"text\":\"REvil\",\"link\":\"/en/topics/REvil\"},{\"text\":\"Cloudflare Back-end Selector\",\"link\":\"/en/topics/cf-backend-selector\"},{\"text\":\"Upgrade PHP On CentOS 7\",\"link\":\"/en/topics/Upgrade-PHP-version-on-CentOS-7\"}]}],\"/en/wa/\":[{\"text\":\"Activation Guides\",\"collapsed\":true,\"items\":[{\"text\":\"HWID Activation\",\"link\":\"/en/wa/\"},{\"text\":\"KMS Activation\",\"link\":\"/en/wa/kms\"},{\"text\":\"Methods Chart\",\"link\":\"/en/wa/chart\"},{\"text\":\"Download Windows / Office\",\"link\":\"/en/wa/genuine-installation-media\"}]},{\"text\":\"Activation Methods\",\"collapsed\":true,\"items\":[{\"text\":\"HWID Method Details\",\"link\":\"/en/wa/hwid\"},{\"text\":\"Ohook Method Details\",\"link\":\"/en/wa/ohook\"},{\"text\":\"TSforge Method Details\",\"link\":\"/en/wa/tsforge\"},{\"text\":\"KMS38 Method Details\",\"link\":\"/en/wa/kms38\"},{\"text\":\"Online KMS Method Details\",\"link\":\"/en/wa/online_kms\"},{\"text\":\"Change Windows Edition\",\"link\":\"/en/wa/change_windows_edition\"},{\"text\":\"Change Office Edition\",\"link\":\"/en/wa/change_office_edition\"},{\"text\":\" $OEM$ Folders\",\"link\":\"/en/wa/oem-folder\"},{\"text\":\"Switches in Command line\",\"link\":\"/en/wa/command_line_switches\"}]},{\"text\":\"Technical Details\",\"collapsed\":true,\"items\":[{\"text\":\"Win 10 After End-Of-Life\",\"link\":\"/en/wa/windows10_eol\"},{\"text\":\"Remove Malware\",\"link\":\"/en/wa/remove_malware\"},{\"text\":\"Clean Install Windows\",\"link\":\"/en/wa/clean_install_windows\"},{\"text\":\"Office License Is Not Genuine\",\"link\":\"/en/wa/office-license-is-not-genuine\"},{\"text\":\"Licensing Servers Issue\",\"link\":\"/en/wa/licensing-servers-issue\"},{\"text\":\"Issues Due To Gaming Spoofers\",\"link\":\"/en/wa/issues_due_to_gaming_spoofers\"},{\"text\":\"Change Edition Issues\",\"link\":\"/en/wa/change_edition_issues\"},{\"text\":\"Evaluation Editions\",\"link\":\"/en/wa/evaluation_editions\"},{\"text\":\"Fix Powershell\",\"link\":\"/en/wa/fix_powershell\"},{\"text\":\"Fix Windows Services\",\"link\":\"/en/wa/fix_service\"},{\"text\":\"Fix WPA Registry\",\"link\":\"/en/wa/fix-wpa-registry\"},{\"text\":\"In-place Repair Upgrade\",\"link\":\"/en/wa/in-place_repair_upgrade\"},{\"text\":\"Office c2r Custom Install\",\"link\":\"/en/wa/office_c2r\"}]},{\"text\":\"Manual Activation Guides\",\"collapsed\":true,\"items\":[{\"text\":\"Manual HWID activation\",\"link\":\"/en/wa/manual_hwid_activation\"},{\"text\":\"Manual Ohook activation\",\"link\":\"/en/wa/manual_ohook_activation\"},{\"text\":\"Manual KMS38 activation\",\"link\":\"/en/wa/manual_kms38_activation\"}]},{\"text\":\"Support\",\"collapsed\":true,\"items\":[{\"text\":\"Troubleshoot\",\"link\":\"/en/wa/troubleshoot\"},{\"text\":\"FAQ\",\"link\":\"/en/wa/faq\"},{\"text\":\"Credits\",\"link\":\"/en/wa/credits\"}]}]},\"logo\":\"/logo-h.svg\",\"search\":{\"provider\":\"local\"},\"docFooter\":{\"prev\":\"Previous page\",\"next\":\"Next page\"},\"lastUpdated\":{\"text\":\"Last updated\",\"formatOptions\":{\"dateStyle\":\"medium\",\"timeStyle\":\"short\"}},\"editLink\":{\"pattern\":\"https://github.com/Diana-Cl/Diana-Cl/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Diana-Cl/\"},{\"icon\":\"telegram\",\"link\":\"https://t.me/F_NiREvil/6448\"}],\"footer\":{\"copyright\":\"© 2025 REvil — Sharing knowledge, one note at a time\",\"message\":\"Made with using VitePress\"}}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>